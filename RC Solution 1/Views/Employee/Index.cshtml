@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <p>
        a) Write a program that will create a html page, showing a table of employees that are ordered by
        the total time worked. The table should show the Name, and the Total time worked. Color the
        table row if the employee worked less than 100 hours. The data for this task must be retrieved
        from a GET call on following API endpoint:
        <a href="https://rc-vault-fap-live-1.azurewebsites.net/api/gettimeentries?code=vO17RnE8vuzXzPJo5eaLLjXjmRW07law99QTD90zat9FfOQJKKUcgQ==">https://rc-vault-fap-live-1.azurewebsites.net/api/gettimeentries?code=vO17RnE8vuzXzPJo5eaLLjXjmRW07law99QTD90zat9FfOQJKKUcgQ==</a>
    </p>

    <table class="table table-bordered">
        <tr>
            <th>Employee Name</th>
            <th>Total time worked (Hours)</th>
        </tr>
    @foreach (var employee in @Model)
    {
        @if (employee.TotalTimeWorkedHours < 100)
        {
            <tr class="bg-danger">
                <td>@employee.EmployeeName</td>
                <td>@Math.Round(employee.TotalTimeWorkedHours)</td>
            </tr>
        }else
        {
            <tr>
                <td>@employee.EmployeeName</td>
                <td>@Math.Round(employee.TotalTimeWorkedHours)</td>
            </tr>
        }
    }
    </table>

    <p>
        b) Write a program that will generate a PNG (image) file using the data from the REST endpoint.
        Pie-chart will be showing a percentage of the total time worked by an employee.
    </p>

    <form asp-controller="Employee" asp-action="GeneratePieChart">
        <button class="btn btn-success" type="submit"><i class="bi bi-download"></i> Download pie chart</button>
    </form>
</div>
